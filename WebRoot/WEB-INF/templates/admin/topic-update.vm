#set($layout="/layout/layout-admin.vm")
#set($title="更新主题 - 主题管理")
#set($topic=$TopicXHelper.findDetail())
<script type="text/javascript">
	$(document).ready(function() {
		var ue = UE.getEditor("content");

		$("#topicForm").submit(function(e) {
			e.preventDefault();
			jQuery.ajax({
				type: "POST",
				dataType: "json",
				url: "$ctx/admin/topic/update-${topic.id}.html",
				data: $("#topicForm").serialize(),
				beforeSend: function() {
					fadeProgressModal(true);
				},
				success: function(result) {
					fadeProgressModal(false);

					if(result.success) {
						fadeSuccessModal(result);
					} else {
						fadeFailureModal(result);
					}
				}
			});
		});
	});
</script>
<form id="topicForm" class="form-horizontal" name="topicForm" method="post">
	<div class="radius-block">
		<div class="control-group">
			<label for="catg"><span class="icon-chevron-right"></span><strong>主题类型</strong>-必选项！</label>
			<select id="catg" name="catg" class="span3">
				#formSelectOptions($EnumXHelper.toTopicCatgMap(), $topic.catg)
			</select>
		</div>
		<div class="control-group">
			<label for="title"><span class="icon-chevron-right"></span><strong>主题标题</strong>-必输项！</label> <input id="title" name="title" value="${topic.title}" class="span12" type="text" required="required" />
		</div>
		<div class="control-group">
			<label for="summary"><span class="icon-chevron-right"></span><strong>主题描述</strong>-必输项！</label>
			<textarea rows="2" id="summary" name="summary" class="span12" placeholder="留空则截取主题内容">${topic.summary}</textarea>
		</div>
		<div class="control-group">
			<label for="content"><span class="icon-chevron-right"></span><strong>主题内容</strong>-必输项！</label>
			<div>
				<textarea id="content" name="content" class="span12" style="height: 150px" required="required">${topic.content}</textarea>
			</div>
		</div>
		<div class="pull-right">
			<button type="submit" class="btn btn-primary">提交保存</button>
		</div>
		<div class="clearfix"></div>
	</div>
</form>
#parse("/admin/inc/inc-ueditor.vm")
