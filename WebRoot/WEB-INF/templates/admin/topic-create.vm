#set($layout="/layout/layout-admin.vm")
#set($title="新增主题 - 主题管理")
<script type="text/javascript">
$(document).ready(function() {
	var ue = UE.getEditor("content");
	var _url = "$ctx/admin/topic/create.html";
	
	$("#topicForm").submit(function(e) {
		e.preventDefault();
		jQuery.ajax({
			type: "POST",
			dataType: "json",
			url: _url,
			data: $("#topicForm").serialize(),
			beforeSend: function() {
				fadeProgressModal(true);
			},
			success: function(result) {
				fadeProgressModal(false);

				if(result.success) {
					fadeSuccessModal(result);
					_url = "$ctx/admin/topic/update-"+(result.bizData.biz_id)+".html";
					$("#form-opt-name").text("更新主题");
				} else {
					fadeFailureModal(result);
				}
			}
		});
	});
});
</script>
<form id="topicForm" class="form-horizontal" name="topicForm" method="post">
	<div class="radius-block">
		<ul class="breadcrumb">
        	<li><span class="divider">/</span></li>
        	<li>后台管理</li>
			<li><span class="divider">/</span></li>
        	<li id="form-opt-name">创建主题</li>
        </ul>
		<div class="control-group">
			<label for="catg"><span class="icon-chevron-right"></span><strong>主题类型</strong>-必选项！</label>
			<select id="catg" name="catg" class="span3">
				#formSelectOptions($EnumXHelper.toTopicCatgMap(), "")
			</select>
		</div>
		<div class="control-group">
			<label for="title"><span class="icon-chevron-right"></span><strong>主题标题</strong>-必输项！</label> <input id="title" name="title" class="span12" type="text" required="required" />
		</div>
		<div class="control-group">
			<label for="summary"><span class="icon-chevron-right"></span><strong>主题描述</strong>-必输项！</label>
			<textarea rows="2" id="summary" name="summary" class="span12" placeholder="留空则截取主题内容"></textarea>
		</div>
		<div class="control-group">
			<label for="content"><span class="icon-chevron-right"></span><strong>主题内容</strong>-必输项！</label>
			<div>
				<textarea id="content" name="content" class="span12" style="height: 150px" required="required"></textarea>
			</div>
		</div>
		<div class="pull-right">
			<button type="submit" class="btn btn-primary">提交保存</button>
		</div>
		<div class="clearfix"></div>
	</div>
</form>
#parse("/admin/inc/inc-ueditor.vm")
